(this["webpackJsonpbnbm-frontend"]=this["webpackJsonpbnbm-frontend"]||[]).push([[13],{1779:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return Me}));var a,r,c,i=t(43),o=t(2),l=t.n(o),u=t(14),s=t(1),m=t.n(s),d=t(994),f=t(40),p=t(64),b=t(965),x=t(35),g=t(36),h=t(1764),O=t(1755),v=t(1270),E=t(281),j=t(914),B=t(924),N=t(1315),y=t(1317),k=t(969),w=t(284),P=g.d.button(a||(a=Object(i.a)(["\n  align-items: center;\n  background-color: ",";\n  border: 0;\n  border-radius: 12px;\n  box-shadow: ",";\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  font-size: ","px;\n  font-weight: 700;\n  height: ","px;\n  justify-content: center;\n  outline: none;\n  padding-left: ","px;\n  padding-right: ","px;\n  pointer-events: ",";\n  width: 100%;\n  &:hover {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.boxShadow}),(function(e){return e.disabled?"".concat(e.color,"55"):e.color}),(function(e){return e.fontSize}),(function(e){return e.size}),(function(e){return e.padding}),(function(e){return e.padding}),(function(e){return e.disabled?"none":void 0}),(function(e){return e.color}),(function(e){return e.theme.color.grey[900]})),C=Object(g.d)(w.b)(r||(r=Object(i.a)(["\n  align-items: center;\n  color: inherit;\n  display: flex;\n  flex: 1;\n  height: 56px;\n  justify-content: center;\n  margin: 0 ","px;\n  padding: 0 ","px;\n  text-decoration: none;\n"])),(function(e){return-e.theme.spacing[4]}),(function(e){return e.theme.spacing[4]})),T=g.d.a(c||(c=Object(i.a)(["\n  align-items: center;\n  color: inherit;\n  display: flex;\n  flex: 1;\n  height: 56px;\n  justify-content: center;\n  margin: 0 ","px;\n  padding: 0 ","px;\n  text-decoration: none;\n"])),(function(e){return-e.theme.spacing[4]}),(function(e){return e.theme.spacing[4]})),D=function(e){var n,t,a,r,c=e.children,i=e.disabled,o=e.href,l=e.onClick,u=e.size,d=e.text,f=e.to,p=e.variant,b=Object(s.useContext)(g.a),x=b.color,h=b.spacing;switch(p){case"secondary":n=x.teal[200];break;case"default":default:n=x.primary.main}switch(u){case"sm":a=h[2],t=36,r=10;break;case"lg":a=h[4],t=72,r=16;break;case"md":default:a=h[4],t=56,r=16}var O=Object(s.useMemo)((function(){return f?m.a.createElement(C,{to:f},d):o?m.a.createElement(T,{href:o,target:"__blank"},d):d}),[o,d,f]);return m.a.createElement(P,{boxShadow:void 0,color:n,disabled:i,fontSize:r,onClick:l,padding:a,size:t},c,O)},M=t(922),z=t(945),A=t(925),I=t(923),R=t(21),F=function(e){var n=e.max,t=e.title,a=e.description,r=e.onConfirm,c=e.onDismiss,i=e.action,o=e.tokenName,l=Object(s.useState)(""),u=Object(x.a)(l,2),d=u[0],f=u[1],p=Object(s.useMemo)((function(){return Object(R.b)(n)}),[n]),b=Object(s.useCallback)((function(e){return f(e.currentTarget.value)}),[f]),g=Object(s.useCallback)((function(){f(p)}),[p,f]);return m.a.createElement(M.a,null,m.a.createElement(A.a,{text:t}),m.a.createElement(I.a,{value:d,onSelectMax:g,onChange:b,max:p,symbol:o}),m.a.createElement(j.a,{text:a}),m.a.createElement(z.a,null,m.a.createElement(D,{text:"Cancel",onClick:c}),m.a.createElement(D,{text:i,onClick:function(){return r(d)}})))},S=t(915),U=t(926),V=t(129);var W,_,G,K,J,L,q,H,Q,X,Y,Z,$,ee,ne=function(){var e=Object(V.b)();return Object(s.useCallback)((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unexpected error is occurred.";n.catch((function(n){n.message.includes("User denied")||(console.error("Uncaught exception: ".concat(n.stack)),e({error:{message:t,stack:n.stack}}))}))}),[e])},te=g.d.div(W||(W=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 20px;\n  font-weight: 700;\n  height: 64px;\n  justify-content: center;\n  color: #ffffff;\n  margin-top: ","px;\n"])),(function(e){return-e.theme.spacing[3]})),ae=g.d.div(_||(_=Object(i.a)(["\n  //background-color: ",";\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.color.grey[900]}),(function(e){return e.theme.spacing[2]})),re=g.d.div(G||(G=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[5]})),ce=g.d.div(K||(K=Object(i.a)(["\n  font-size: 20px;\n  padding-left: ","px;\n  padding-right: ","px;\n  padding-bottom: ","px;\n"])),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[3]}),(function(e){return e.theme.spacing[4]})),ie=g.d.div(J||(J=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n"]))),oe=g.d.div(L||(L=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.spacing[3]})),le=g.d.span(q||(q=Object(i.a)([""]))),ue=g.d.div(H||(H=Object(i.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),se=function(e){var n=e.action,t=e.fromToken,a=e.fromTokenName,r=e.toToken,c=e.toTokenName,i=e.priceDesc,o=e.onExchange,l=e.disabled,u=void 0!==l&&l,s=e.disabledDescription,d=ne(),f=Object(E.a)().contracts.Treasury,p=Object(U.b)(t,f.address),b=Object(x.a)(p,2),g=b[0],w=b[1],P=Object(S.a)(t),C=Object(k.a)(m.a.createElement(F,{title:n,description:i,max:P,onConfirm:function(e){o(e),M()},action:n,tokenName:a})),T=Object(x.a)(C,2),D=T[0],M=T[1];return m.a.createElement(h.a,null,m.a.createElement(v.a,null,m.a.createElement(ue,null,m.a.createElement(te,null,"".concat(n," ").concat(c)),m.a.createElement(re,null,m.a.createElement(ie,null,m.a.createElement(ae,null,m.a.createElement(B.a,{symbol:t.symbol,size:64})),m.a.createElement(j.a,{text:a,variant:"primary"})),m.a.createElement(ce,null,m.a.createElement(N.a,{icon:y.a})),m.a.createElement(ie,null,m.a.createElement(ae,null,m.a.createElement(B.a,{symbol:r.symbol,size:64})),m.a.createElement(j.a,{text:c,variant:"primary"}))),m.a.createElement(le,null,i),m.a.createElement(oe,null,g===U.a.APPROVED||u?m.a.createElement(O.a,{color:"primary",variant:"contained",onClick:D,disabled:!0},s||n):m.a.createElement(O.a,{color:"primary",variant:"contained",disabled:g===U.a.PENDING||g===U.a.UNKNOWN,onClick:function(){return d(w(),"Unable to approve ".concat(a))}},"Approve ".concat(a))))))},me=t(996),de=t(947),fe=t(37),pe=t(27),be=function(){var e=Object(s.useState)(pe.a.from(0)),n=Object(x.a)(e,2),t=n[0],a=n[1],r=Object(E.a)(),c=Object(s.useCallback)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,r.getBnbmPriceInLastTWAP();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[r]);return Object(s.useEffect)((function(){c().catch((function(e){return console.error("Failed to fetch BNBM price: ".concat(e.stack))}));var e=setInterval(c,fe.b.refreshInterval);return function(){return clearInterval(e)}}),[a,r,c]),t},xe=t(916),ge=g.d.div(Q||(Q=Object(i.a)(["\n  font-size: 20px;\n  font-weight: 700;\n  text-shadow: 2px 2px #000000;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spacing[2]})),he=g.d.span(X||(X=Object(i.a)(["\n  text-shadow: 1px 1px #000000;\n  text-align: center;\n"]))),Oe=g.d.div(Y||(Y=Object(i.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: ","px;\n"])),(function(e){return e.theme.spacing[2]})),ve=function(e){var n=e.tokenName,t=e.description,a=e.price;return m.a.createElement(h.a,{style:{backgroundColor:"#00000000",boxShadow:"none"}},m.a.createElement(Oe,null,m.a.createElement(ge,null,"\ud83d\udcb0 ".concat(n," = ").concat(a," BNB")),m.a.createElement(he,null,t)))},Ee=function(){var e=Object(s.useState)(pe.a.from(0)),n=Object(x.a)(e,2),t=n[0],a=n[1],r=Object(E.a)();return Object(s.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a,e.next=4,r.getBondsPurchasable();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.error(e.t2);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,r]),t},je=pe.a.from(10).pow(16),Be=je.mul(101).div(100),Ne=t(1781),ye=t(1778),ke=t(1751),we=t(973),Pe=t(964),Ce=g.d.div(Z||(Z=Object(i.a)(["\n  display: flex;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n"]))),Te=g.d.div($||($=Object(i.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  };\n  margin-right: 40px;\n  margin-left: 40px;\n  \n"]))),De=g.d.div(ee||(ee=Object(i.a)(["\n  display: flex;\n  flex: 0.8;\n  margin: 0 20px;\n  flex-direction: column;\n\n  @media (max-width: 768px) {\n    width: 80%;\n    margin: 16px 0;\n  };\n  margin-top: 40px\n"]))),Me=function(){var e=Object(f.g)().path,n=Object(p.c)().account,t=Object(E.a)(),a=Object(xe.b)(),r=Object(de.a)(),c=be(),i=Ee(),o=Object(S.a)(null===t||void 0===t?void 0:t.BBNB),x=Object(s.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.buyBonds(n);case 2:r=e.sent,a(r,{summary:"Buy ".concat(Number(n).toFixed(2)," BNBB with ").concat(n," BNBM")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a]),g=Object(s.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.redeemBonds(n);case 2:r=e.sent,a(r,{summary:"Redeem ".concat(n," BNBB")});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,a]),h=Object(s.useMemo)((function(){return c.gt(Be)}),[c]),O=Object(s.useMemo)((function(){return Number(null===r||void 0===r?void 0:r.tokenInFtm)<1.01}),[r]),v=Object(s.useMemo)((function(){return Number(null===r||void 0===r?void 0:r.tokenInFtm)>=1.1}),[r]),j=(Number(c)/1e16).toFixed(2);return m.a.createElement(f.c,null,m.a.createElement(d.a,null,m.a.createElement(Pe.a,null),m.a.createElement(we.a,null,m.a.createElement("title",null,"bnbm.finance | Bonds")),n?m.a.createElement(m.a.Fragment,null,m.a.createElement(f.a,{exact:!0,path:e},m.a.createElement("h2",{style:{color:"white",textAlign:"center"}},"Buy & Redeem Bonds"),m.a.createElement("p",{style:{color:"white",textAlign:"center"}},"Earn premiums upon redemption")),m.a.createElement(ye.a,{mt:5,style:{marginTop:"30px"}},!1===v?m.a.createElement(ke.a,{item:!0,xs:12,sm:12,justify:"center",style:{margin:"18px",display:"flex"}},m.a.createElement(Ne.a,{style:{fontSize:"16px",fontFamily:"eurostyleextended"},variant:"filled",severity:"error"},m.a.createElement("b",null,"Claiming below 1.1 peg will not receive a redemption bonus, claim wisely!"))):m.a.createElement(m.a.Fragment,null)),m.a.createElement(Ce,null,m.a.createElement(Te,null,m.a.createElement(se,{action:"Purchase",fromToken:t.BNBM,fromTokenName:"BNBM",toToken:t.BBNB,toTokenName:"BNBB",priceDesc:O?Object(R.a)(i,18,2)+" BNBB available for purchase":"BNBM is over peg",onExchange:x,disabled:!r||h})),m.a.createElement(Te,null,m.a.createElement(se,{action:"Redeem",fromToken:t.BBNB,fromTokenName:"BNBB",toToken:t.BNBM,toTokenName:"BNBM",priceDesc:"".concat(Object(R.a)(o)," BNBB Available in wallet"),onExchange:g,disabled:!r||o.eq(0)||!h,disabledDescription:h?null:"Enabled when 100 BNBM > ".concat(1.01,"BNB")}))),m.a.createElement(De,null,m.a.createElement(ve,{tokenName:"100 BNBM",description:"Last-Hour TWAP Price",price:j||"-"}),m.a.createElement(me.a,{size:"md"}),m.a.createElement(ve,{tokenName:"100 BNBB",description:"Current Price: (BNBM)^2",price:Number(null===r||void 0===r?void 0:r.tokenInFtm).toFixed(4)||"-"}))):m.a.createElement(b.a,null)))}},926:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var a,r=t(2),c=t.n(r),i=t(14),o=t(101),l=t(27),u=t(1),s=t(916),m=t(949),d=o.a.constants.MaxUint256,f=l.a.from("1000000000000000000000000");!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_APPROVED=1]="NOT_APPROVED",e[e.PENDING=2]="PENDING",e[e.APPROVED=3]="APPROVED"}(a||(a={})),n.b=function(e,n){var t=Object(s.a)(e.address,n),r=Object(m.a)(e,n,t),o=Object(u.useMemo)((function(){return r?r.lt(f)?t?a.PENDING:a.NOT_APPROVED:a.APPROVED:a.UNKNOWN}),[r,t]),l=Object(s.b)(),p=Object(u.useCallback)(Object(i.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o===a.NOT_APPROVED){t.next=3;break}return console.error("approve was called unnecessarily"),t.abrupt("return");case 3:return t.next=5,e.approve(n,d);case 5:r=t.sent,l(r,{summary:"Approve ".concat(e.symbol),approval:{tokenAddress:e.address,spender:n}});case 7:case"end":return t.stop()}}),t)}))),[o,e,n,l]);return[o,p]}},965:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(1),r=t.n(a),c=t(1778),i=t(1031),o=function(){return r.a.createElement(c.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement(i.a,null))}},996:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a,r=t(43),c=t(1),i=t.n(c),o=t(36),l=o.d.div(a||(a=Object(r.a)(["\n  height: ","px;\n  width: ","px;\n"])),(function(e){return e.size}),(function(e){return e.size})),u=function(e){var n,t=e.size,a=void 0===t?"md":t,r=Object(c.useContext)(o.a).spacing;switch(a){case"lg":n=r[6];break;case"sm":n=r[2];break;case"md":default:n=r[4]}return i.a.createElement(l,{size:n})}}}]);
//# sourceMappingURL=13.dafec43f.chunk.js.map